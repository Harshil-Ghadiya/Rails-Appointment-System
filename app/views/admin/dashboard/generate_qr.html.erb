<%= turbo_frame_tag "main_content" do %>
<div class="dashboard-wrapper" style="display: flex; min-height: 100vh; background: #f4f7f6; font-family: 'Segoe UI', Tahoma, sans-serif;">
  
  <%# 1. Sidebar Render %>

  <%# 2. Main Content Area %>
  <div class="main-content" style="flex-grow: 1; margin-left: 60px; padding: 40px; display: flex; justify-content: center;">
    
    <div class="qr-container" style="max-width: 600px; width: 100%;">
      
      <%# Poster Card %>
      <div id="qr-poster" style="background: white; padding: 40px; border-radius: 15px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); text-align: center; border: 1px solid #e0e0e0;">
        
        <%# Section 1: Organization Details %>
        <div style="margin-bottom: 30px;">
          <h1 style="color: #2c3e50; margin: 0; font-size: 28px; text-transform: uppercase;"><%= @organization.name %></h1>
          <p style="color: #7f8c8d; margin: 5px 0; font-size: 16px;">Digital Appointment System</p>
          <div style="display: inline-block; background: #e8f5e9; color: #2e7d32; padding: 5px 15px; border-radius: 20px; font-size: 12px; font-weight: bold; margin-top: 10px;">
            OFFICIAL BOOKING PARTNER
          </div>
        </div>

        <hr style="border: none; border-top: 1px solid #eee; margin: 20px 0;">

        <%# Section 2: QR Code Area %>
        <div style="margin-bottom: 20px;">
          <h4 style="color: #34495e; margin-bottom: 15px;">SCAN TO GET YOUR TOKEN</h4>
          <div style="background: #f9f9f9; padding: 25px; border-radius: 12px; display: inline-block; border: 2px solid #34495e;">
            <%= @svg.html_safe %>
          </div>
          <p style="margin-top: 15px; font-size: 14px; color: #7f8c8d;">Point your camera at the QR code to book instantly.</p>
        </div>

        <%# Section 3: Booking URL %>
       <div style="background: #f1f9ff; padding: 15px; border-radius: 8px; margin-bottom: 25px; border: 1px solid #d1e9ff;">
  <small style="display: block; color: #0277bd; font-weight: bold; margin-bottom: 8px;">PATIENT PREVIEW LINK:</small>
  <% info_url = patient_info_url(id: @organization.id) %> 
  <%= link_to info_url, info_url, style: "color: #0277bd; font-size: 13px; text-decoration: underline; word-break: break-all; font-weight: 500;" %>
  
  <p style="margin-top: 10px; font-size: 12px; color: #546e7a;">
    (This link shows Live Token status before booking)
  </p>
</div>

        <%# Section 4: Hospital Contact (Extra Info) %>
        <div style="display: flex; justify-content: space-around; margin-bottom: 30px; font-size: 13px; color: #95a5a6;">
          <span>üìû <%= @organization.phone_number %></span>
          <span>üìß <%= @organization.email %></span>
        </div>

        <%# Action Buttons (No Print during window.print) %>
        <div class="no-print">
          <button onclick="window.print()" style="background: #3498db; color: white; padding: 14px; border: none; border-radius: 8px; cursor: pointer; font-size: 16px; width: 100%; font-weight: bold; transition: 0.3s;">
            üñ®Ô∏è PRINT CLINIC POSTER
          </button>
          <%= link_to "‚Üê Back to Dashboard", admin_dashboard_path, style: "display: block; margin-top: 15px; color: #7f8c8d; text-decoration: none; font-size: 14px;" %>
        </div>

      </div>

      <%# Footer Notice %>
      <p style="text-align: center; color: #bdc3c7; font-size: 12px; margin-top: 20px;">
        Generated by Smart Queue Management System
      </p>

    </div>
  </div>
</div>
<% end %>

<%# Print Styles: Poster print karse tyare sidebar ane buttons hide thai jase %>
<style>
  @media print {
    body { background: white !important; }
    .sidebar, .no-print, .main-content { margin-left: 0 !important; padding: 0 !important; }
    .dashboard-wrapper { display: block !important; }
    #qr-poster { box-shadow: none !important; border: 2px solid #34495e !important; width: 100% !important; margin: 0 auto !important; }
  }
  
  .no-print button:hover {
    background: #2980b9 !important;
  }
</style>




