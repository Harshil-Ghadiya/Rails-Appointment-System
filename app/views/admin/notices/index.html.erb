<%= turbo_frame_tag "main_content" do %>
<div style="display: flex;">
  <div style="margin-left: 50px; padding: 30px; flex: 1; background: #f4f7f6; min-height: 100vh;">
    <h2 style="color: #2c3e50;">ðŸ“¢ Manage Clinic Notices</h2>

    <div id="notice_form_container" style="background: white; padding: 25px; border-radius: 12px; box-shadow: 0 4px 12px rgba(0,0,0,0.05); margin-bottom: 30px;">
      <%= form_with model: [:admin, @notice] do |f| %>
        <div style="margin-bottom: 15px;">
          <%= f.label :notice_type, "Notice Type", style: "display: block; font-weight: bold; margin-bottom: 5px;" %>
          <%= f.select :notice_type, Notice.notice_types.keys.map { |k| [k.humanize, k] }, {}, 
              style: "width: 100%; padding: 10px; border-radius: 5px; border: 1px solid #ddd;" %>
        </div>

        <div style="margin-bottom: 15px;">
          <%= f.label :content, "Message", style: "display: block; font-weight: bold; margin-bottom: 5px;" %>
          <%= f.text_area :content, placeholder: "Enter notice message here...", rows: 3, 
              style: "width: 100%; padding: 10px; border-radius: 5px; border: 1px solid #ddd;" %>
        </div>

        <%= f.submit "Post Notice", style: "background: #3498db; color: white; border: none; padding: 10px 25px; border-radius: 5px; cursor: pointer; font-weight: bold;" %>
      <% end %>
    </div>

    <h3 style="color: #34495e;">Active Notices</h3>
    
    <%# --- 2. List Container ID (Navi notice ahiya "prepend" thase) --- %>
    <div id="notices_list" style="display: grid; gap: 15px;">
      <% @notices.each do |n| %>
        <%# --- 3. Darek notice row mate unique ID (Delete karva mate) --- %>
        <div id="<%= dom_id(n) %>" style="background: white; padding: 15px; border-radius: 8px; border-left: 5px solid <%= n.general? ? '#3498db' : '#f1c40f' %>; display: flex; justify-content: space-between; align-items: center;">
          <div>
            <span style="font-size: 12px; text-transform: uppercase; font-weight: bold; color: #7f8c8d;">
              <%= n.notice_type.humanize %>
            </span>
            <p style="margin: 5px 0; font-size: 16px; color: #2c3e50;"><%= n.content %></p>
          </div>
          
          <%= button_to admin_notice_path(n), method: :delete, data: { turbo_confirm: "Delete this notice?" }, 
              style: "background: #ff7675; color: white; border: none; padding: 5px 12px; border-radius: 4px; cursor: pointer;" do %>
            Delete
          <% end %>
        </div>
      <% end %>

      <% if @notices.empty? %>
        <p id="no_notices_msg" style="color: #bdc3c7;">No notices posted yet.</p>
      <% end %>
    </div>
  </div>
</div>
<% end %>